<div class="builder-form">
  <div class="field">
    <div class="field-label">User</div>
    <select {{on "change" (fn this.updateRelation "user")}}>
      <option value="">
        Select a user...
      </option>
      {{#each @data.users as |user|}}
        <option value={{user.id}}>
          {{user.name}}
        </option>
      {{/each}}
    </select>
  </div>

  <div class="field">
    <div class="field-label">Job Post</div>
    <input type="text" value={{@data.jobPost.company.name}} disabled="true"/>
  </div>

  <div class="field">
    <div class="field-label">Resume</div>
    <select {{on "change" (fn this.updateRelation "resume")}}>
      <option value="" disabled={{if @data.application.resume "" "disabled"}} selected={{unless @data.application.resume "selected"}}>
        Select a resume...
      </option>
      {{#each @data.resumes as |resume|}}
        <option value={{resume.id}}>
          {{resume.title}}
        </option>
      {{/each}}
    </select>
  </div>

  <div class="field">
    <div class="field-label">Cover Letter</div>
    <select {{on "change" (fn this.updateRelation "coverLetter")}}>
      <option value="" disabled={{if @data.application.coverLetter "" "disabled"}} selected={{unless @data.application.coverLetter "selected"}}>
        Select a cover letter...
      </option>
      {{#each @data.coverLetters as |coverLetter|}}
        <option value={{coverLetter.id}}>
          {{coverLetter.id}} {{coverLetter.company}}
        </option>
      {{/each}}
    </select>
  </div>

  <div class="field">
    <div class="field-label">Applied At</div>
    <input type="date" value={{format-date @data.application.appliedAt}} {{on "change" (fn this.updateField "appliedAt")}}>
  </div>

  <div class="field">
    <div class="field-label">Status</div>
    <select {{on "change" (fn this.updateField "status")}}>
      <option value="">Select status...</option>
      {{#each this.statuses as |status|}}
        <option value={{status}} selected={{this.isStatusSelected status}}>
          {{status}}
        </option>
      {{/each}}
    </select>
  </div>

  <div class="field">
    <div class="field-label">Tracking URL</div>
    <input type="url" value={{unless @data.application.trackingUrl @data.jobPost.link}} {{on "input" (fn this.updateField "trackingUrl")}}>
  </div>

  <div class="field">
    <div class="field-label">Notes</div>
    <textarea value={{@data.application.notes}} {{on "input" (fn this.updateField "notes")}}></textarea>
  </div>

  <div class="form-actions">
    {{yield}}
  </div>
  <button type="button" class="btn" {{on 'click' this.saveApplication}}>Save</button>
</div>
