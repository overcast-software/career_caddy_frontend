{{page-title "Index"}}
<Menus::SubnavBar>
  <LinkTo @route="questions.new" class='btn'>New</LinkTo>
</Menus::SubnavBar>
<BarCart @flashMessages={{this.flashMessages}}/>
<div class='fairway'>
  <Panel::Card>
    <PowerSelect
      @options={{this.companies}}
      @onChange={{this.updateCompany}}
      @searchEnabled={{true}}
      @searchField="name"
      @selected={{this.selectedCompany}}
      @placeholder="Select a Company"
      @labelText="Filter by Company"
      as |company|
    >
      {{company.name}}
    </PowerSelect>
    {{#each this.companyQuestions as |question|}}
      <div class='panel-card'>
        <p>
          {{question.company.name}}: {{question.jobApplication.jobPost.name}}{{question.content}}
        </p>
        <p>
          answers: {{question.answers.length}}
        </p>
        <br/>
        <LinkTo @route='questions.show.answers' @model={{question}}>show</LinkTo>
        <LinkTo @route='questions.show.answers.new' @model={{question}}>answer</LinkTo>
      </div>
    {{/each}}
  </Panel::Card>
  {{yield}}
</div>
